<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Занятие 19</title>
    <link rel="shortcut icon" href="./../favicon.ico"/>
    <link rel="stylesheet" href="./../dist/reveal.css" />
    <link rel="stylesheet" href="./../dist/theme/white.css" id="theme" />
    <link rel="stylesheet" href="./../css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./../_assets/.reveal-md/styles.css" />

    <script>
      document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>');
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section ><section data-markdown><script type="text/template">

# OTUS

## Javascript Basic

</script></section><section data-markdown><script type="text/template">

### Вопросы?

</script></section></section><section  data-markdown><script type="text/template">

## Различие между стандартами языка, инструменты транспиляции, проблемы типизации

</script></section><section ><section data-markdown><script type="text/template">

### Различие между стандартами языка, инструменты транспиляции

</script></section><section data-markdown><script type="text/template">

Какая текущая версия языка ECMAScript?

</script></section><section data-markdown><script type="text/template">

Какие новые удобные вещи появились в сравнении с ES5 ?

<!--
- классы
- стрелочные функции
- let/const
- Symbol / bigint
 -->

[1](https://medium.com/@dupski/what-major-new-features-were-in-each-javascript-version-what-version-should-i-target-25526c498687), [2](http://es6-features.org/), [3](https://github.com/lukehoban/es6features), [4](https://www.w3schools.com/js/js_versions.asp)

</script></section><section data-markdown><script type="text/template">

В каком году появилась версия Javascript следующая за ES5 ?

</script></section><section data-markdown><script type="text/template">

Какие инструменты позволяют использовать новые версии, в окружении, которое работает со старыми версиями языка?

</script></section><section data-markdown><script type="text/template">

В каком году появился Babel.js?

<!-- Sep 2014 -->

</script></section><section data-markdown><script type="text/template">

До того, как язык начал развиваться, его пытались модернизировать или заменить другими языками ([которые бы транспилировались в Javascript](https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS))

</script></section><section data-markdown><script type="text/template">

Примерно там же (в 2012) появился язык [TypeScript](https://ru.wikipedia.org/wiki/TypeScript).

Разработчиком языка TypeScript является Андерс Хейлсберг (англ. Anders Hejlsberg), создавший ранее Turbo Pascal, Delphi и C#.

</script></section><section data-markdown><script type="text/template">

Главное чем отличался TS:

- был **надмножеством** Javascript
- поддерживал классы
- добавлял работу с типизацией

</script></section><section data-markdown><script type="text/template">

### Вопросы?

</script></section></section><section ><section data-markdown><script type="text/template">

### Проблемы типизации

</script></section><section data-markdown><script type="text/template">

Виды типизации:

- динамическая / статическая
- слабая / сильная
- неявная / явная

Какая типизация в Javascript?

</script></section><section data-markdown><script type="text/template">

Большая часть проблем в разработке связанна с незначительными факторами:

- опечатки _(неправильно назвали переменную или свойство)_
- невнимательность _(не передали параметр, или передали неправильный параметр)_
- потеря контекста _(не учли контекст вызова)_
- мелкие упущения _(не учли все места, которые затрагиваются изменениями)_

</script></section><section data-markdown><script type="text/template">

Это характерно для всех языков, но особенности типизации дают для этого хорошую почву.

</script></section><section data-markdown><script type="text/template">

Изначальная идея TypeScript - добавить явное указание типов в код. Что должно значительно уменьшить число таких проблем (или сделать их обнаружение более быстрым, без запуска кода).

</script></section><section data-markdown><script type="text/template">

```ts
function getCityMap(city) {
  return `https://map.com?q=${city}`;
}
```

Что с этим кодом может пойти не так?

</script></section><section data-markdown><script type="text/template">

```ts
function getCityMap(city: string): string {
  return `https://map.com?q=${city}`;
}
```

</script></section><section data-markdown><script type="text/template">

Помимо работы с стандартными типами для Javascript, TS позволял определить тип как класс / интерфейс / форму (shape).

[Например](https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgArQM4HsTIN4BQyxyIcAthAFzIZhSgDmA3AQL4EFgCeADigGVycKGHRRsuALz4iJMpRp0GIFnOLAAjjRABXcgCNorDgQQ46yA1gM0hIsZhzIZhEqQrVkAcgBCN7wAadWQtGgB2AA52VjMLMCsbcUkaZOcZawNmIA) описать свойства и их тип, что было полезно для языка, где классами пользоваться еще не привыкли, а вот объекты были в ходу уже давно.

</script></section><section data-markdown><script type="text/template">

Со временем функционал расширялся, в нем появлялись новые вещи (вроде декораторов) и обработчик языка становился умнее (например появился вывод типов).

</script></section><section data-markdown><script type="text/template">

Какую еще проблему решает Typescript?

</script></section><section data-markdown><script type="text/template">

```js
/**
 * Returns city map url
 * @param {string} city
 * @return {string} url
 */
function getCityMap(city) {
  return `https://map.com?q=${city}`;
}
```

Какая проблема с этим кодом?

</script></section><section data-markdown><script type="text/template">

Указание типов

- документирует код описанием контрактов
- позволяет проверять использование кода на соответствие контрактам (и чем больше кода, тем это сложнее и важнее)

</script></section><section data-markdown><script type="text/template">

**Важно!** Typescript _(как и другие языки транспилирующиеся в JS)_ **НЕ работает в браузере**.

Т.е. все его проверки работают только в момент написания или сборки кода! _(в браузере будет работать уже javascript, полученный при транспиляции Typescript)_

</script></section><section data-markdown><script type="text/template">

### Вопросы?

</script></section></section><section ><section data-markdown><script type="text/template">

### Зачем мы будем работать с Typescript

</script></section><section data-markdown><script type="text/template">

1. Экономит нервы и время (поначалу код на typescript может писаться дольше, но со временем эта проблема уходит)
1. Когда то _был_ еще [flow language](https://flow.org/), но сейчас Typescript самая популярная "альтернатива" js
1. _"Необходим"_ для больших проектов (и очень рекомендован для маленьких)
1. Востребован при поиске работы
1. Улучшает понимание работы кода и понимание некоторых паттернов
   разработки

</script></section><section data-markdown><script type="text/template">

Что мы разберем на курсе:

- как использовать базовые возможности языка (базовые типы, интерфейсы, типизация функций)
- как настроить окружение для работы
- как применять некоторые "продвинутые" темы (немного generic, вывод типов,кастинг)

</script></section><section data-markdown><script type="text/template">

Базовые темы мы разберем отдельным занятием, остальное будем смотреть по ходу остальных занятий.

</script></section><section data-markdown><script type="text/template">

Дальше код будет писаться на Typescript.

</script></section><section data-markdown><script type="text/template">

### Вопросы?

</script></section></section><section ><section data-markdown><script type="text/template">

### Установка, настройка и запуск Typescript

</script></section><section data-markdown><script type="text/template">

1. Создать новый npm-проект
1. Установить пакет [`typescript`](https://www.npmjs.com/package/typescript)
1. Инициализировать конфигурацию для Typescript
1. Создать файлы
1. Выполнить команду `npx tsc` (Для проверки, без сборки `npx tsc --noEmit`)

</script></section><section data-markdown><script type="text/template">

```bash
mkdir typescript-test
cd typescript-test

npm init -y

npm install typescript --save-dev

npx tsc --init

echo "export function x(n: number) { console.log('x with n', n); }" > "x.ts"
echo "import { x } from './x'; " > "index.ts"
echo "function y() { x(1); }" >> "index.ts"
echo "y();" >> "index.ts"

npx tsc
```

</script></section><section data-markdown><script type="text/template">

### Вопросы?

</script></section></section><section  data-markdown><script type="text/template">

Дополнительные материалы:

- [The TypeScript Handbook (30 минут для быстрого старта)](https://www.typescriptlang.org/docs/handbook/intro.html)
- [Основное про типы в TS](https://canonium.com/category/typescript)
- TypeScript как будущее энтерпрайзного JavaScript [1](https://dou.ua/lenta/articles/typescript-1/) и [2](https://dou.ua/lenta/articles/typescript-2/)
- [Глубокое погружение в TypeScript](https://github.com/etroynov/typescript-book)
</script></section></div>
    </div>

    <script src="./../dist/reveal.js"></script>

    <script src="./../plugin/markdown/markdown.js"></script>
    <script src="./../plugin/highlight/highlight.js"></script>
    <script src="./../plugin/zoom/zoom.js"></script>
    <script src="./../plugin/notes/notes.js"></script>
    <script src="./../plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"slideNumber":true,"hash":true,"history":true,"backgroundTransition":"fade","width":"80%"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
